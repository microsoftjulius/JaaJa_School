!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core"],t):t((e=e||self).FullCalendarInteraction={},e.FullCalendar)}(this,function(e,m){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function t(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};m.config.touchMouseIgnoreWait=500;var n=0,i=0,o=!1,l=(a.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),--i||window.removeEventListener("touchmove",s,{passive:!1})},a.prototype.tryStart=function(e){var t=this.querySubjectEl(e),n=e.target;return!(!t||this.handleSelector&&!m.elementClosest(n,this.handleSelector)||(this.subjectEl=t,this.downEl=n,this.isDragging=!0,this.wasTouchScroll=!1))},a.prototype.cleanup=function(){o=!1,this.isDragging=!1,this.subjectEl=null,this.downEl=null,this.destroyScrollWatch()},a.prototype.querySubjectEl=function(e){return this.selector?m.elementClosest(e.target,this.selector):this.containerEl},a.prototype.shouldIgnoreMouse=function(){return n||this.isTouchDragging},a.prototype.cancelTouchScroll=function(){this.isDragging&&(o=!0)},a.prototype.initScrollWatch=function(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))},a.prototype.recordCoords=function(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},a.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},a.prototype.createEventFromMouse=function(e,t){var n=0,r=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(n=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:n,deltaY:r}},a.prototype.createEventFromTouch=function(e,t){var n,r=e.touches,i=0,o=0,a=r&&r.length?(n=r[0].pageX,r[0].pageY):(n=e.pageX,e.pageY);return t?(this.origPageX=n,this.origPageY=a):(i=n-this.origPageX,o=a-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:n,pageY:a,deltaX:i,deltaY:o}},a);function a(e){var r=this;this.subjectEl=null,this.downEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(e){var t,n;r.shouldIgnoreMouse()||(0!==(n=e).button||n.ctrlKey)||!r.tryStart(e)||(t=r.createEventFromMouse(e,!0),r.emitter.trigger("pointerdown",t),r.initScrollWatch(t),r.shouldIgnoreMove||document.addEventListener("mousemove",r.handleMouseMove),document.addEventListener("mouseup",r.handleMouseUp))},this.handleMouseMove=function(e){var t=r.createEventFromMouse(e);r.recordCoords(t),r.emitter.trigger("pointermove",t)},this.handleMouseUp=function(e){document.removeEventListener("mousemove",r.handleMouseMove),document.removeEventListener("mouseup",r.handleMouseUp),r.emitter.trigger("pointerup",r.createEventFromMouse(e)),r.cleanup()},this.handleTouchStart=function(e){var t,n;r.tryStart(e)&&(r.isTouchDragging=!0,t=r.createEventFromTouch(e,!0),r.emitter.trigger("pointerdown",t),r.initScrollWatch(t),n=e.target,r.shouldIgnoreMove||n.addEventListener("touchmove",r.handleTouchMove),n.addEventListener("touchend",r.handleTouchEnd),n.addEventListener("touchcancel",r.handleTouchEnd),window.addEventListener("scroll",r.handleTouchScroll,!0))},this.handleTouchMove=function(e){var t=r.createEventFromTouch(e);r.recordCoords(t),r.emitter.trigger("pointermove",t)},this.handleTouchEnd=function(e){var t;r.isDragging&&((t=e.target).removeEventListener("touchmove",r.handleTouchMove),t.removeEventListener("touchend",r.handleTouchEnd),t.removeEventListener("touchcancel",r.handleTouchEnd),window.removeEventListener("scroll",r.handleTouchScroll,!0),r.emitter.trigger("pointerup",r.createEventFromTouch(e)),r.cleanup(),r.isTouchDragging=!1,n++,setTimeout(function(){n--},m.config.touchMouseIgnoreWait))},this.handleTouchScroll=function(){r.wasTouchScroll=!0},this.handleScroll=function(e){var t,n;r.shouldIgnoreMove||(t=window.pageXOffset-r.prevScrollX+r.prevPageX,n=window.pageYOffset-r.prevScrollY+r.prevPageY,r.emitter.trigger("pointermove",{origEvent:e,isTouch:r.isTouchDragging,subjectEl:r.subjectEl,pageX:t,pageY:n,deltaX:t-r.origPageX,deltaY:n-r.origPageY}))},this.containerEl=e,this.emitter=new m.EmitterMixin,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),i++||window.addEventListener("touchmove",s,{passive:!1})}function s(e){o&&e.preventDefault()}var c=(d.prototype.start=function(e,t,n){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.pageXOffset,this.origScreenY=n-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},d.prototype.handleMove=function(e,t){this.deltaX=e-window.pageXOffset-this.origScreenX,this.deltaY=t-window.pageYOffset-this.origScreenY,this.updateElPosition()},d.prototype.setIsVisible=function(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)},d.prototype.stop=function(e,t){function n(){r.cleanup(),t()}var r=this;e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)},d.prototype.doRevertAnimation=function(e,t){var n=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();n.style.transition="top "+t+"ms,left "+t+"ms",m.applyStyle(n,{left:r.left,top:r.top}),m.whenTransitionDone(n,function(){n.style.transition="",e()})},d.prototype.cleanup=function(){this.mirrorEl&&(m.removeElement(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},d.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&m.applyStyle(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},d.prototype.getMirrorEl=function(){var e=this.sourceElRect,t=this.mirrorEl;return t||((t=this.mirrorEl=this.sourceEl.cloneNode(!0)).classList.add("fc-unselectable"),t.classList.add("fc-dragging"),m.applyStyle(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t},d);function d(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}var g,u=(t(h,g=m.ScrollController),h.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},h.prototype.getScrollTop=function(){return this.scrollTop},h.prototype.getScrollLeft=function(){return this.scrollLeft},h.prototype.setScrollTop=function(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())},h.prototype.setScrollLeft=function(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())},h.prototype.getClientWidth=function(){return this.clientWidth},h.prototype.getClientHeight=function(){return this.clientHeight},h.prototype.getScrollWidth=function(){return this.scrollWidth},h.prototype.getScrollHeight=function(){return this.scrollHeight},h.prototype.handleScrollChange=function(){},h);function h(e,t){var n=g.call(this)||this;return n.handleScroll=function(){n.scrollTop=n.scrollController.getScrollTop(),n.scrollLeft=n.scrollController.getScrollLeft(),n.handleScrollChange()},n.scrollController=e,n.doesListening=t,n.scrollTop=n.origScrollTop=e.getScrollTop(),n.scrollLeft=n.origScrollLeft=e.getScrollLeft(),n.scrollWidth=e.getScrollWidth(),n.scrollHeight=e.getScrollHeight(),n.clientWidth=e.getClientWidth(),n.clientHeight=e.getClientHeight(),n.clientRect=n.computeClientRect(),n.doesListening&&n.getEventTarget().addEventListener("scroll",n.handleScroll),n}var p,v=(t(f,p=u),f.prototype.getEventTarget=function(){return this.scrollController.el},f.prototype.computeClientRect=function(){return m.computeInnerRect(this.scrollController.el)},f);function f(e,t){return p.call(this,new m.ElementScrollController(e),t)||this}var E,y=(t(D,E=u),D.prototype.getEventTarget=function(){return window},D.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},D.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},D);function D(e){return E.call(this,new m.WindowScrollController,e)||this}var w="function"==typeof performance?performance.now:Date.now,T=(M.prototype.start=function(e,t){this.isEnabled&&(this.scrollCaches=this.buildCaches(),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))},M.prototype.handleMove=function(e,t){var n,r,i,o;this.isEnabled&&(n=e-window.pageXOffset,r=t-window.pageYOffset,i=null===this.pointerScreenY?0:r-this.pointerScreenY,o=null===this.pointerScreenX?0:n-this.pointerScreenX,i<0?this.everMovedUp=!0:0<i&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:0<o&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(w())))},M.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var e=0,t=this.scrollCaches;e<t.length;e++)t[e].destroy();this.scrollCaches=null}},M.prototype.requestAnimation=function(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)},M.prototype.handleSide=function(e,t){var n=e.scrollCache,r=this.edgeThreshold,i=r-e.distance,o=i*i/(r*r)*this.maxVelocity*t,a=1;switch(e.name){case"left":a=-1;case"right":n.setScrollLeft(n.getScrollLeft()+o*a);break;case"top":a=-1;case"bottom":n.setScrollTop(n.getScrollTop()+o*a)}},M.prototype.computeBestEdge=function(e,t){for(var n=this.edgeThreshold,r=null,i=0,o=this.scrollCaches;i<o.length;i++){var a=o[i],l=a.clientRect,s=e-l.left,c=l.right-e,d=t-l.top,g=l.bottom-t;0<=s&&0<=c&&0<=d&&0<=g&&(d<=n&&this.everMovedUp&&a.canScrollUp()&&(!r||r.distance>d)&&(r={scrollCache:a,name:"top",distance:d}),g<=n&&this.everMovedDown&&a.canScrollDown()&&(!r||r.distance>g)&&(r={scrollCache:a,name:"bottom",distance:g}),s<=n&&this.everMovedLeft&&a.canScrollLeft()&&(!r||r.distance>s)&&(r={scrollCache:a,name:"left",distance:s}),c<=n&&this.everMovedRight&&a.canScrollRight()&&(!r||r.distance>c)&&(r={scrollCache:a,name:"right",distance:c}))}return r},M.prototype.buildCaches=function(){return this.queryScrollEls().map(function(e){return e===window?new y(!1):new v(e,!1)})},M.prototype.queryScrollEls=function(){for(var e=[],t=0,n=this.scrollQuery;t<n.length;t++){var r=n[t];"object"==typeof r?e.push(r):e.push.apply(e,Array.prototype.slice.call(document.querySelectorAll(r)))}return e},M);function M(){var n=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){var e,t;n.isAnimating&&((e=n.computeBestEdge(n.pointerScreenX+window.pageXOffset,n.pointerScreenY+window.pageYOffset))?(t=w(),n.handleSide(e,(t-n.msSinceRequest)/1e3),n.requestAnimation(t)):n.isAnimating=!1)}}var b,C=(t(R,b=m.ElementDragging),R.prototype.destroy=function(){this.pointer.destroy()},R.prototype.startDelay=function(e){var t=this;"number"==typeof this.delay?this.delayTimeoutId=setTimeout(function(){t.delayTimeoutId=null,t.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)},R.prototype.handleDelayEnd=function(e){this.isDelayEnded=!0,this.tryStartDrag(e)},R.prototype.handleDistanceSurpassed=function(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)},R.prototype.tryStartDrag=function(e){this.isDelayEnded&&this.isDistanceSurpassed&&(this.pointer.wasTouchScroll&&!this.touchScrollAllowed||(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY),this.emitter.trigger("dragstart",e),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll()))},R.prototype.tryStopDrag=function(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))},R.prototype.stopDrag=function(e){this.isDragging=!1,this.emitter.trigger("dragend",e)},R.prototype.setIgnoreMove=function(e){this.pointer.shouldIgnoreMove=e},R.prototype.setMirrorIsVisible=function(e){this.mirror.setIsVisible(e)},R.prototype.setMirrorNeedsRevert=function(e){this.mirrorNeedsRevert=e},R.prototype.setAutoScrollEnabled=function(e){this.autoScroller.isEnabled=e},R);function R(e){var i=b.call(this,e)||this;i.delay=null,i.minDistance=0,i.touchScrollAllowed=!0,i.mirrorNeedsRevert=!1,i.isInteracting=!1,i.isDragging=!1,i.isDelayEnded=!1,i.isDistanceSurpassed=!1,i.delayTimeoutId=null,i.onPointerDown=function(e){i.isDragging||(i.isInteracting=!0,i.isDelayEnded=!1,i.isDistanceSurpassed=!1,m.preventSelection(document.body),m.preventContextMenu(document.body),e.isTouch||e.origEvent.preventDefault(),i.emitter.trigger("pointerdown",e),i.pointer.shouldIgnoreMove||(i.mirror.setIsVisible(!1),i.mirror.start(e.subjectEl,e.pageX,e.pageY),i.startDelay(e),i.minDistance||i.handleDistanceSurpassed(e)))},i.onPointerMove=function(e){var t,n,r;i.isInteracting&&(i.emitter.trigger("pointermove",e),i.isDistanceSurpassed||(t=i.minDistance)*t<=(n=e.deltaX)*n+(r=e.deltaY)*r&&i.handleDistanceSurpassed(e),i.isDragging&&("scroll"!==e.origEvent.type&&(i.mirror.handleMove(e.pageX,e.pageY),i.autoScroller.handleMove(e.pageX,e.pageY)),i.emitter.trigger("dragmove",e)))},i.onPointerUp=function(e){i.isInteracting&&(i.isInteracting=!1,m.allowSelection(document.body),m.allowContextMenu(document.body),i.emitter.trigger("pointerup",e),i.isDragging&&(i.autoScroller.stop(),i.tryStopDrag(e)),i.delayTimeoutId&&(clearTimeout(i.delayTimeoutId),i.delayTimeoutId=null))};var t=i.pointer=new l(e);return t.emitter.on("pointerdown",i.onPointerDown),t.emitter.on("pointermove",i.onPointerMove),t.emitter.on("pointerup",i.onPointerUp),i.mirror=new c,i.autoScroller=new T,i}var I=(P.prototype.destroy=function(){for(var e=0,t=this.scrollCaches;e<t.length;e++)t[e].destroy()},P.prototype.computeLeft=function(){for(var e=this.origRect.left,t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];e+=r.origScrollLeft-r.getScrollLeft()}return e},P.prototype.computeTop=function(){for(var e=this.origRect.top,t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];e+=r.origScrollTop-r.getScrollTop()}return e},P.prototype.isWithinClipping=function(e,t){for(var n,r,i={left:e,top:t},o=0,a=this.scrollCaches;o<a.length;o++){var l=a[o];if(n=l.getEventTarget(),"HTML"!==(r=n.tagName)&&"BODY"!==r&&!m.pointInsideRect(i,l.clientRect))return!1}return!0},P);function P(e){this.origRect=m.computeRect(e),this.scrollCaches=m.getClippingParents(e).map(function(e){return new v(e,!0)})}var L=(j.prototype.processFirstCoord=function(e){var t,n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl;i!==document&&(t=m.computeRect(i),r=m.constrainPoint(r,t));var o,a=this.initialHit=this.queryHitForOffset(r.left,r.top);a?(this.useSubjectCenter&&t&&(o=m.intersectRects(t,a.rect))&&(r=m.getRectCenter(o)),this.coordAdjust=m.diffPoints(r,n)):this.coordAdjust={left:0,top:0}},j.prototype.handleMove=function(e,t){var n=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);!t&&A(this.movingHit,n)||(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,e))},j.prototype.prepareHits=function(){this.offsetTrackers=m.mapHash(this.droppableStore,function(e){return e.component.buildPositionCaches(),new I(e.el)})},j.prototype.releaseHits=function(){var e=this.offsetTrackers;for(var t in e)e[t].destroy();this.offsetTrackers={}},j.prototype.queryHitForOffset=function(e,t){var n=this.droppableStore,r=this.offsetTrackers,i=null;for(var o in n){var a,l,s,c,d,g,u,h,p=n[o].component,v=r[o];v.isWithinClipping(e,t)&&(s=e-(a=v.computeLeft()),c=t-(l=v.computeTop()),g=(d=v.origRect).right-d.left,u=d.bottom-d.top,0<=s&&s<g&&0<=c&&c<u&&(!(h=p.queryHit(s,c,g,u))||p.props.dateProfile&&!m.rangeContainsRange(p.props.dateProfile.activeRange,h.dateSpan.range)||i&&!(h.layer>i.layer)||(h.rect.left+=a,h.rect.right+=a,h.rect.top+=l,h.rect.bottom+=l,i=h)))}return i},j);function j(e,t){var n=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(e){var t=n.dragging;n.initialHit=null,n.movingHit=null,n.finalHit=null,n.prepareHits(),n.processFirstCoord(e),n.initialHit||!n.requireInitial?(t.setIgnoreMove(!1),n.emitter.trigger("pointerdown",e)):t.setIgnoreMove(!0)},this.handleDragStart=function(e){n.emitter.trigger("dragstart",e),n.handleMove(e,!0)},this.handleDragMove=function(e){n.emitter.trigger("dragmove",e),n.handleMove(e)},this.handlePointerUp=function(e){n.releaseHits(),n.emitter.trigger("pointerup",e)},this.handleDragEnd=function(e){n.movingHit&&n.emitter.trigger("hitupdate",null,!0,e),n.finalHit=n.movingHit,n.movingHit=null,n.emitter.trigger("dragend",e)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new m.EmitterMixin}function A(e,t){return!e&&!t||Boolean(e)===Boolean(t)&&m.isDateSpansEqual(e.dateSpan,t.dateSpan)}var H,N=(t(V,H=m.Interaction),V.prototype.destroy=function(){this.dragging.destroy()},V);function V(e){var o=H.call(this,e)||this;o.handlePointerDown=function(e){var t=o.dragging;t.setIgnoreMove(!o.component.isValidDateDownEl(t.pointer.downEl))},o.handleDragEnd=function(e){var t,n,r,i=o.component;o.dragging.pointer.wasTouchScroll||(n=(t=o.hitDragging).initialHit,r=t.finalHit,n&&r&&A(n,r)&&i.calendar.triggerDateClick(n.dateSpan,n.dayEl,i.view,e.origEvent))};var t=e.component;o.dragging=new C(t.el),o.dragging.autoScroller.isEnabled=!1;var n=o.hitDragging=new L(o.dragging,m.interactionSettingsToStore(e));return n.emitter.on("pointerdown",o.handlePointerDown),n.emitter.on("dragend",o.handleDragEnd),o}var Y,_=(t(X,Y=m.Interaction),X.prototype.destroy=function(){this.dragging.destroy()},X);function X(e){var o=Y.call(this,e)||this;o.dragSelection=null,o.handlePointerDown=function(e){var t=o.component,n=o.dragging,r=t.opt("selectable")&&t.isValidDateDownEl(e.origEvent.target);n.setIgnoreMove(!r),n.delay=e.isTouch?function(e){var t=e.opt("selectLongPressDelay");null==t&&(t=e.opt("longPressDelay"));return t}(t):null},o.handleDragStart=function(e){o.component.calendar.unselect(e)},o.handleHitUpdate=function(e,t){var n=o.component.calendar,r=null,i=!1;e&&((r=function(e,t,n){var r=e.dateSpan,i=t.dateSpan,o=[r.range.start,r.range.end,i.range.start,i.range.end];o.sort(m.compareNumbers);for(var a={},l=0,s=n;l<s.length;l++){var c=(0,s[l])(e,t);if(!1===c)return null;c&&S(a,c)}return a.range={start:o[0],end:o[3]},a.allDay=r.allDay,a}(o.hitDragging.initialHit,e,n.pluginSystem.hooks.dateSelectionTransformers))&&o.component.isDateSelectionValid(r)||(i=!0,r=null)),r?n.dispatch({type:"SELECT_DATES",selection:r}):t||n.dispatch({type:"UNSELECT_DATES"}),i?m.disableCursor():m.enableCursor(),t||(o.dragSelection=r)},o.handlePointerUp=function(e){o.dragSelection&&(o.component.calendar.triggerDateSelect(o.dragSelection,e),o.dragSelection=null)};var t=e.component,n=o.dragging=new C(t.el);n.touchScrollAllowed=!1,n.minDistance=t.opt("selectMinDistance")||0,n.autoScroller.isEnabled=t.opt("dragScroll");var r=o.hitDragging=new L(o.dragging,m.interactionSettingsToStore(e));return r.emitter.on("pointerdown",o.handlePointerDown),r.emitter.on("dragstart",o.handleDragStart),r.emitter.on("hitupdate",o.handleHitUpdate),r.emitter.on("pointerup",o.handlePointerUp),o}var U,O=(t(q,U=m.Interaction),q.prototype.destroy=function(){this.dragging.destroy()},q.prototype.displayDrag=function(e,t){var n=this.component.calendar,r=this.receivingCalendar;r&&r!==e&&(r===n?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:m.createEmptyEventStore(),isEvent:!0,origSeg:t.origSeg}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})},q.prototype.clearDrag=function(){var e=this.component.calendar,t=this.receivingCalendar;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})},q.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingCalendar=null,this.validMutation=null,this.mutatedRelevantEvents=null},q.SELECTOR=".fc-draggable, .fc-resizable",q);function q(e){var E=U.call(this,e)||this;E.subjectSeg=null,E.isDragging=!1,E.eventRange=null,E.relevantEvents=null,E.receivingCalendar=null,E.validMutation=null,E.mutatedRelevantEvents=null,E.handlePointerDown=function(e){var t=e.origEvent.target,n=E.component,r=E.dragging,i=r.mirror,o=n.calendar,a=E.subjectSeg=m.getElSeg(e.subjectEl),l=(E.eventRange=a.eventRange).instance.instanceId;E.relevantEvents=m.getRelevantEvents(o.state.eventStore,l),r.minDistance=e.isTouch?0:n.opt("eventDragMinDistance"),r.delay=e.isTouch&&l!==n.props.eventSelection?function(e){var t=e.opt("eventLongPressDelay");null==t&&(t=e.opt("longPressDelay"));return t}(n):null,i.parentNode=o.el,i.revertDuration=n.opt("dragRevertDuration");var s=n.isValidSegDownEl(t)&&!m.elementClosest(t,".fc-resizer");r.setIgnoreMove(!s),E.isDragging=s&&e.subjectEl.classList.contains("fc-draggable")},E.handleDragStart=function(e){var t=E.component.calendar,n=E.eventRange,r=n.instance.instanceId;e.isTouch?r!==E.component.props.eventSelection&&t.dispatch({type:"SELECT_EVENT",eventInstanceId:r}):t.dispatch({type:"UNSELECT_EVENT"}),E.isDragging&&(t.unselect(e),t.publiclyTrigger("eventDragStart",[{el:E.subjectSeg.el,event:new m.EventApi(t,n.def,n.instance),jsEvent:e.origEvent,view:E.component.view}]))},E.handleHitUpdate=function(e,t){var n,r,i,o,a,l,s,c,d;E.isDragging&&(n=E.relevantEvents,r=E.hitDragging.initialHit,i=E.component.calendar,a=o=d=null,l=!1,s={affectedEvents:n,mutatedEvents:m.createEmptyEventStore(),isEvent:!0,origSeg:E.subjectSeg},e&&(i===(d=(c=e.component).calendar)||c.opt("editable")&&c.opt("droppable")?(o=function(e,t,n){var r=e.dateSpan,i=t.dateSpan,o=r.range.start,a=i.range.start,l={};r.allDay!==i.allDay&&(l.allDay=i.allDay,l.hasEnd=t.component.opt("allDayMaintainDuration"),i.allDay&&(o=m.startOfDay(o)));var s=m.diffDates(o,a,e.component.dateEnv,e.component===t.component?e.component.largeUnit:null);s.milliseconds&&(l.allDay=!1);for(var c={datesDelta:s,standardProps:l},d=0,g=n;d<g.length;d++){(0,g[d])(c,e,t)}return c}(r,e,d.pluginSystem.hooks.eventDragMutationMassagers))&&(a=m.applyMutationToEventStore(n,d.eventUiBases,o,d),s.mutatedEvents=a,c.isInteractionValid(s)||(l=!0,a=o=null,s.mutatedEvents=m.createEmptyEventStore())):d=null),E.displayDrag(d,s),l?m.disableCursor():m.enableCursor(),t||(i===d&&A(r,e)&&(o=null),E.dragging.setMirrorNeedsRevert(!o),E.dragging.setMirrorIsVisible(!e||!document.querySelector(".fc-mirror")),E.receivingCalendar=d,E.validMutation=o,E.mutatedRelevantEvents=a))},E.handlePointerUp=function(){E.isDragging||E.cleanup()},E.handleDragEnd=function(e){if(E.isDragging){var t,n=E.component.calendar,r=E.component.view,i=E.receivingCalendar,o=E.validMutation,a=E.eventRange.def,l=E.eventRange.instance,s=new m.EventApi(n,a,l),c=E.relevantEvents,d=E.mutatedRelevantEvents,g=E.hitDragging.finalHit;if(E.clearDrag(),n.publiclyTrigger("eventDragStop",[{el:E.subjectSeg.el,event:s,jsEvent:e.origEvent,view:r}]),o)if(i===n){n.dispatch({type:"MERGE_EVENTS",eventStore:d});for(var u={},h=0,p=n.pluginSystem.hooks.eventDropTransformers;h<p.length;h++){var v=p[h];S(u,v(o,n))}var f=S({},u,{el:e.subjectEl,delta:o.datesDelta,oldEvent:s,event:new m.EventApi(n,d.defs[a.defId],l?d.instances[l.instanceId]:null),revert:function(){n.dispatch({type:"MERGE_EVENTS",eventStore:c})},jsEvent:e.origEvent,view:r});n.publiclyTrigger("eventDrop",[f])}else{i&&(n.publiclyTrigger("eventLeave",[{draggedEl:e.subjectEl,event:s,view:r}]),n.dispatch({type:"REMOVE_EVENT_INSTANCES",instances:E.mutatedRelevantEvents.instances}),i.dispatch({type:"MERGE_EVENTS",eventStore:E.mutatedRelevantEvents}),e.isTouch&&i.dispatch({type:"SELECT_EVENT",eventInstanceId:l.instanceId}),t=S({},i.buildDatePointApi(g.dateSpan),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:g.component}),i.publiclyTrigger("drop",[t]),i.publiclyTrigger("eventReceive",[{draggedEl:e.subjectEl,event:new m.EventApi(i,d.defs[a.defId],d.instances[l.instanceId]),view:g.component}]))}else n.publiclyTrigger("_noEventDrop")}E.cleanup()};var t=E.component,n=E.dragging=new C(t.el);n.pointer.selector=q.SELECTOR,n.touchScrollAllowed=!1,n.autoScroller.isEnabled=t.opt("dragScroll");var r=E.hitDragging=new L(E.dragging,m.interactionSettingsStore);return r.useSubjectCenter=e.useEventCenter,r.emitter.on("pointerdown",E.handlePointerDown),r.emitter.on("dragstart",E.handleDragStart),r.emitter.on("hitupdate",E.handleHitUpdate),r.emitter.on("pointerup",E.handlePointerUp),r.emitter.on("dragend",E.handleDragEnd),E}var W,x=(t(F,W=m.Interaction),F.prototype.destroy=function(){this.dragging.destroy()},F.prototype.querySeg=function(e){return m.getElSeg(m.elementClosest(e.subjectEl,this.component.fgSegSelector))},F);function F(e){var g=W.call(this,e)||this;g.draggingSeg=null,g.eventRange=null,g.relevantEvents=null,g.validMutation=null,g.mutatedRelevantEvents=null,g.handlePointerDown=function(e){var t=g.component,n=g.querySeg(e),r=g.eventRange=n.eventRange;g.dragging.minDistance=t.opt("eventDragMinDistance"),g.dragging.setIgnoreMove(!g.component.isValidSegDownEl(e.origEvent.target)||e.isTouch&&g.component.props.eventSelection!==r.instance.instanceId)},g.handleDragStart=function(e){var t=g.component.calendar,n=g.eventRange;g.relevantEvents=m.getRelevantEvents(t.state.eventStore,g.eventRange.instance.instanceId),g.draggingSeg=g.querySeg(e),t.unselect(),t.publiclyTrigger("eventResizeStart",[{el:g.draggingSeg.el,event:new m.EventApi(t,n.def,n.instance),jsEvent:e.origEvent,view:g.component.view}])},g.handleHitUpdate=function(e,t,n){var r=g.component.calendar,i=g.relevantEvents,o=g.hitDragging.initialHit,a=g.eventRange.instance,l=null,s=null,c=!1,d={affectedEvents:i,mutatedEvents:m.createEmptyEventStore(),isEvent:!0,origSeg:g.draggingSeg};e&&(l=function(e,t,n,r,i){for(var o=e.component.dateEnv,a=e.dateSpan.range.start,l=t.dateSpan.range.start,s=m.diffDates(a,l,o,e.component.largeUnit),c={},d=0,g=i;d<g.length;d++){var u=(0,g[d])(e,t);if(!1===u)return null;u&&S(c,u)}if(n){if(o.add(r.start,s)<r.end)return c.startDelta=s,c}else if(o.add(r.end,s)>r.start)return c.endDelta=s,c;return null}(o,e,n.subjectEl.classList.contains("fc-start-resizer"),a.range,r.pluginSystem.hooks.eventResizeJoinTransforms)),l&&(s=m.applyMutationToEventStore(i,r.eventUiBases,l,r),d.mutatedEvents=s,g.component.isInteractionValid(d)||(c=!0,s=l=null,d.mutatedEvents=null)),s?r.dispatch({type:"SET_EVENT_RESIZE",state:d}):r.dispatch({type:"UNSET_EVENT_RESIZE"}),c?m.disableCursor():m.enableCursor(),t||(l&&A(o,e)&&(l=null),g.validMutation=l,g.mutatedRelevantEvents=s)},g.handleDragEnd=function(e){var t=g.component.calendar,n=g.component.view,r=g.eventRange.def,i=g.eventRange.instance,o=new m.EventApi(t,r,i),a=g.relevantEvents,l=g.mutatedRelevantEvents;t.publiclyTrigger("eventResizeStop",[{el:g.draggingSeg.el,event:o,jsEvent:e.origEvent,view:n}]),g.validMutation?(t.dispatch({type:"MERGE_EVENTS",eventStore:l}),t.publiclyTrigger("eventResize",[{el:g.draggingSeg.el,startDelta:g.validMutation.startDelta||m.createDuration(0),endDelta:g.validMutation.endDelta||m.createDuration(0),prevEvent:o,event:new m.EventApi(t,l.defs[r.defId],i?l.instances[i.instanceId]:null),revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:a})},jsEvent:e.origEvent,view:n}])):t.publiclyTrigger("_noEventResize"),g.draggingSeg=null,g.relevantEvents=null,g.validMutation=null};var t=e.component,n=g.dragging=new C(t.el);n.pointer.selector=".fc-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=t.opt("dragScroll");var r=g.hitDragging=new L(g.dragging,m.interactionSettingsToStore(e));return r.emitter.on("pointerdown",g.handlePointerDown),r.emitter.on("dragstart",g.handleDragStart),r.emitter.on("hitupdate",g.handleHitUpdate),r.emitter.on("dragend",g.handleDragEnd),g}var G=(z.prototype.destroy=function(){this.calendar.off("select",this.onSelect),this.documentPointer.destroy()},z);function z(e){var a=this;this.isRecentPointerDateSelect=!1,this.onSelect=function(e){e.jsEvent&&(a.isRecentPointerDateSelect=!0)},this.onDocumentPointerUp=function(e){var t,n,r=a.calendar,i=a.documentPointer,o=r.state;i.wasTouchScroll||(o.dateSelection&&!a.isRecentPointerDateSelect&&(t=r.viewOpt("unselectAuto"),n=r.viewOpt("unselectCancel"),!t||t&&m.elementClosest(i.downEl,n)||r.unselect(e)),o.eventSelection&&!m.elementClosest(i.downEl,O.SELECTOR)&&r.dispatch({type:"UNSELECT_EVENT"})),a.isRecentPointerDateSelect=!1},this.calendar=e;var t=this.documentPointer=new l(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerup",this.onDocumentPointerUp),e.on("select",this.onSelect)}var k=(B.prototype.buildDragMeta=function(e){return"object"==typeof this.suppliedDragMeta?m.parseDragMeta(this.suppliedDragMeta):"function"==typeof this.suppliedDragMeta?m.parseDragMeta(this.suppliedDragMeta(e)):(t=function(e,t){var n=m.config.dataAttrPrefix,r=(n?n+"-":"")+t;return e.getAttribute("data-"+r)||""}(e,"event"),n=t?JSON.parse(t):{create:!1},m.parseDragMeta(n));var t,n},B.prototype.displayDrag=function(e,t){var n=this.receivingCalendar;n&&n!==e&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})},B.prototype.clearDrag=function(){this.receivingCalendar&&this.receivingCalendar.dispatch({type:"UNSET_EVENT_DRAG"})},B.prototype.canDropElOnCalendar=function(e,t){var n=t.opt("dropAccept");return"function"==typeof n?n(e):"string"!=typeof n||!n||Boolean(m.elementMatches(e,n))},B);function B(e,t){var s=this;this.receivingCalendar=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=function(e){s.dragMeta=s.buildDragMeta(e.subjectEl)},this.handleHitUpdate=function(e,t,n){var r=s.hitDragging.dragging,i=null,o=null,a=!1,l={affectedEvents:m.createEmptyEventStore(),mutatedEvents:m.createEmptyEventStore(),isEvent:s.dragMeta.create,origSeg:null};e&&(i=e.component.calendar,s.canDropElOnCalendar(n.subjectEl,i)&&(o=function(e,t,n){for(var r=S({},t.leftoverProps),i=0,o=n.pluginSystem.hooks.externalDefTransforms;i<o.length;i++){var a=o[i];S(r,a(e,t))}var l=m.parseEventDef(r,t.sourceId,e.allDay,n.opt("forceEventDuration")||Boolean(t.duration),n),s=e.range.start;e.allDay&&t.startTime&&(s=n.dateEnv.add(s,t.startTime));var c=t.duration?n.dateEnv.add(s,t.duration):n.getDefaultEventEnd(e.allDay,s),d=m.createEventInstance(l.defId,{start:s,end:c});return{def:l,instance:d}}(e.dateSpan,s.dragMeta,i),l.mutatedEvents=m.eventTupleToStore(o),(a=!m.isInteractionValid(l,i))&&(l.mutatedEvents=m.createEmptyEventStore(),o=null))),s.displayDrag(i,l),r.setMirrorIsVisible(t||!o||!document.querySelector(".fc-mirror")),a?m.disableCursor():m.enableCursor(),t||(r.setMirrorNeedsRevert(!o),s.receivingCalendar=i,s.droppableEvent=o)},this.handleDragEnd=function(e){var t,n,r,i,o=s.receivingCalendar,a=s.droppableEvent;s.clearDrag(),o&&a&&(n=(t=s.hitDragging.finalHit).component.view,r=s.dragMeta,i=S({},o.buildDatePointApi(t.dateSpan),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:n}),o.publiclyTrigger("drop",[i]),r.create&&(o.dispatch({type:"MERGE_EVENTS",eventStore:m.eventTupleToStore(a)}),e.isTouch&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:a.instance.instanceId}),o.publiclyTrigger("eventReceive",[{draggedEl:e.subjectEl,event:new m.EventApi(o,a.def,a.instance),view:n}]))),s.receivingCalendar=null,s.droppableEvent=null};var n=this.hitDragging=new L(e,m.interactionSettingsStore);n.requireInitial=!1,n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("hitupdate",this.handleHitUpdate),n.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=t}m.config.dataAttrPrefix="";var J=(Q.prototype.destroy=function(){this.dragging.destroy()},Q);function Q(e,t){var o=this;void 0===t&&(t={}),this.handlePointerDown=function(e){var t=o.dragging,n=o.settings,r=n.minDistance,i=n.longPressDelay;t.minDistance=null!=r?r:e.isTouch?0:m.globalDefaults.eventDragMinDistance,t.delay=e.isTouch?null!=i?i:m.globalDefaults.longPressDelay:0},this.handleDragStart=function(e){e.isTouch&&o.dragging.delay&&e.subjectEl.classList.contains("fc-event")&&o.dragging.mirror.getMirrorEl().classList.add("fc-selected")},this.settings=t;var n=this.dragging=new C(e);n.touchScrollAllowed=!1,null!=t.itemSelector&&(n.pointer.selector=t.itemSelector),null!=t.appendTo&&(n.mirror.parentNode=t.appendTo),n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),new k(n,t.eventData)}var Z,K=(t($,Z=m.ElementDragging),$.prototype.destroy=function(){this.pointer.destroy()},$.prototype.setIgnoreMove=function(e){this.shouldIgnoreMove=e},$.prototype.setMirrorIsVisible=function(e){var t;e?this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null):(t=this.mirrorSelector?document.querySelector(this.mirrorSelector):null)&&((this.currentMirrorEl=t).style.visibility="hidden")},$);function $(e){var t=Z.call(this,e)||this;t.shouldIgnoreMove=!1,t.mirrorSelector="",t.currentMirrorEl=null,t.handlePointerDown=function(e){t.emitter.trigger("pointerdown",e),t.shouldIgnoreMove||t.emitter.trigger("dragstart",e)},t.handlePointerMove=function(e){t.shouldIgnoreMove||t.emitter.trigger("dragmove",e)},t.handlePointerUp=function(e){t.emitter.trigger("pointerup",e),t.shouldIgnoreMove||t.emitter.trigger("dragend",e)};var n=t.pointer=new l(e);return n.emitter.on("pointerdown",t.handlePointerDown),n.emitter.on("pointermove",t.handlePointerMove),n.emitter.on("pointerup",t.handlePointerUp),t}var ee=(te.prototype.destroy=function(){this.dragging.destroy()},te);function te(e,t){var n=document;t=e===document||e instanceof Element?(n=e,t||{}):e||{};var r=this.dragging=new K(n);"string"==typeof t.itemSelector?r.pointer.selector=t.itemSelector:n===document&&(r.pointer.selector="[data-event]"),"string"==typeof t.mirrorSelector&&(r.mirrorSelector=t.mirrorSelector),new k(r,t.eventData)}var ne=m.createPlugin({componentInteractions:[N,_,O,x],calendarInteractions:[G],elementDraggingImpl:C});e.Draggable=J,e.FeaturefulElementDragging=C,e.PointerDragging=l,e.ThirdPartyDraggable=ee,e.default=ne,Object.defineProperty(e,"__esModule",{value:!0})});